{"version":3,"sources":["webpack:///./src/views/tipset/Tipset.vue?0abd","webpack:///./src/views/tipset/Tipset.vue?cf60","webpack:///./src/views/tipset/components/BlockDetail.vue?3bc4","webpack:///src/views/tipset/components/BlockDetail.vue","webpack:///./src/views/tipset/components/BlockDetail.vue?4a89","webpack:///./src/views/tipset/components/BlockDetail.vue","webpack:///src/views/tipset/Tipset.vue","webpack:///./src/views/tipset/Tipset.vue?c485","webpack:///./src/views/tipset/Tipset.vue","webpack:///./src/views/tipset/components/BlockDetail.vue?b3a1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","hash","height","attrs","currentBlock","_e","staticRenderFns","realList","getBlockType","$t","type","name","props","String","default","block","Object","data","dataList","mounted","computed","console","log","map","linkList","item","key","value","block_type","component","blocks","columns","watch","deep","immediate","components","BlockDetail","currentHeight","Number","defaultHeight","currentBlockList","filter","mbBlockList","forEach","res","push","mbColumns","labels","shift","title","index","methods","getBlocks","v","handleHashChange","goTo","query","handleHeightChange","handleValueChange"],"mappings":"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","file":"js/Tipset.ca71a8e0.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tipset.vue?vue&type=style&index=0&id=0e5cd3b5&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tipset.vue?vue&type=style&index=0&id=0e5cd3b5&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tipset\"},[(_vm.hash || _vm.height)?_c('block-detail',{attrs:{\"hash\":_vm.hash,\"height\":_vm.height,\"block\":_vm.currentBlock}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block-detail bottom-10 top-20\"},[_c('div',{staticClass:\"block-overview\"},[_c('overview',{attrs:{\"dataList\":_vm.realList,\"block_type\":_vm.getBlockType,\"dataLabel\":_vm.$t('tipset.block.overview')}})],1),_c('message-list',{attrs:{\"withType\":false,\"type\":_vm.type,\"cid\":_vm.hash}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"block-detail bottom-10 top-20\">\n    <div class=\"block-overview\">\n      <overview :dataList=\"realList\" :block_type=\"getBlockType\" :dataLabel=\"$t('tipset.block.overview')\" />\n    </div>\n    <message-list :withType=\"false\" :type=\"type\" :cid=\"hash\" />\n  </div> \n</template>\n<script>\n\nexport default {\n  name: \"BlockDetail\",\n  props: {\n    hash: {\n      type: String,\n      default: \"\"\n    },\n    block: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    type: {\n       type: String,\n       default: \"transaction\"\n    }\n  },\n  data() {\n    return {\n      dataList: [\n        {\n          key: \"block_type\"\n        },\n        {\n          key: \"hash\",\n          style: {\n            fontWeight: \"bold\"\n          }\n        },\n        {\n          key: \"height\",\n        },\n      ]\n    };\n  },\n  mounted(){\n  },\n  computed: {\n    realList() {\n      let currentBlock =this.block;\n      console.log(\"currentBlock:\",currentBlock)\n      \n      return this.dataList.map(item => {\n        let linkList;\n        if (item.key === \"height\") {\n          linkList = [currentBlock[item.key]];\n        } else {\n          linkList = currentBlock[item.key];\n        }\n        return {\n          ...item,\n          value: currentBlock[item.key],\n          linkList: linkList\n        };\n      });\n    },\n    getBlockType() {\n      return this.block_type;\n    }\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.block-detail {\n  position: relative;\n  .block-hash {\n    background: white;\n  }\n  & ::v-deep .message-list {\n    margin-top: 20px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BlockDetail.vue?vue&type=template&id=3448f995&scoped=true&\"\nimport script from \"./BlockDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./BlockDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BlockDetail.vue?vue&type=style&index=0&id=3448f995&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3448f995\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"tipset\">\n    <!-- <ticket-chain\n      @hash-change=\"handleHashChange\"\n      :height.sync=\"height\"\n      :hash=\"hash\"\n      @height-change=\"handleHeightChange\"\n      @get-blocks=\"getBlocks\"\n      v-show=\"!isMobile\"\n    /> -->\n    <block-detail v-if=\"hash || height\" :hash=\"hash\" :height=\"height\" :block=\"currentBlock\"  />\n    <!-- <block-list\n      v-if=\"!hash && !isMobile\"\n      :height=\"currentHeight\"\n      :list=\"currentBlockList\"\n    />\n    <div class=\"mb-block-list\" v-if=\"isMobile && !hash\">\n      <div\n        v-for=\"(value, key) in mbBlockList\"\n        :key=\"key\"\n        class=\"block-item-con\"\n      >\n        <div class=\"height\">\n          <div>{{ $t(\"tipset.height\") }}</div>\n          <div>{{ key }}</div>\n        </div>\n        <mb-board\n          v-for=\"item in value\"\n          :key=\"item.hash\"\n          :dataSource=\"item\"\n          :columns=\"mbColumns\"\n        ></mb-board>\n      </div>\n    </div> -->\n  </div>\n</template>\n<script>\n// import TicketChain from \"./components/TicketChain\";\n// import BlockList from \"./components/BlockList\";\nimport BlockDetail from \"./components/BlockDetail\";\nimport { getBlockByHash , getChunkByHash ,getBlockByHeight } from \"@/api/apis\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Tipset\",\n  data() {\n    return {\n      hash: \"\",\n      height: 0,\n      value: 0,\n      blocks: [],\n      block: {},\n      block_type:\"Block\",\n      dataList: [\n        {\n          key: \"height\",\n          isLink: true,\n          target: \"tipset\"\n        },\n        {\n          key: \"hash\"\n        },\n        {\n          key: \"timestamp\"\n        },\n        {\n          key: \"size\"\n        },\n        {\n          key: \"mesLength\"\n        },\n        {\n          key: \"miner\",\n          target: \"address/account\",\n          isLink: true\n        },\n        {\n          key: \"reward\"\n        },\n        {\n          key: \"parents\",\n          isLink: true,\n          target: \"tipset\",\n          paramKey: \"hash\"\n        },\n        {\n          key: \"parent_weight\"\n        },\n        {\n          key: \"tickets\"\n        },\n        {\n          key: \"state_root\"\n        }\n      ],\n      columns: [\n        {\n          key: \"hash\",\n          isLink: true,\n          target: \"tipset\",\n          ellipsis: true\n        },\n        {\n          key: \"timestamp\"\n        },\n        {\n          key: \"mesLength\"\n        },\n        {\n          key: \"size\",\n          unit: \"bytes\"\n        },\n        {\n          key: \"miner\",\n          isLink: true,\n          target: \"address/detail\",\n          paramKey: \"address\"\n        },\n        {\n          key: \"reward\",\n          unit: \"FIL\"\n        }\n      ]\n    };\n  },\n  watch: {\n    \"$route.query\": {\n      deep: true,\n      immediate: true,\n      async handler(v) {\n          console.log(\"block:\",v);\n          if(v.hash){\n            this.hash = v.hash;\n          let datas = await getBlockByHash(this.hash);\n          if(datas.data.resp.block){\n            this.block = datas.data.resp.block;\n            this.block.block_type = \"Block\"\n          }\n          let datasc = await getChunkByHash(this.hash);\n          if(datasc.data.resp.chunk){\n            this.block = datasc.data.resp.chunk;\n            this.block.height = datasc.data.resp.chunk.height_created;\n            this.block.hash = datasc.data.resp.chunk.chunk_hash;\n            this.block.block_type = \"Chunk\";\n          }\n        }\n        if(v.height){\n          this.height = v.height;\n          let nums = v.height.replace(/,/g,'');\n          let datasN = await getBlockByHeight(nums);\n          console.log(\"datasN:\",datasN)\n          if(datasN.data.resp.header){\n            this.block = datasN.data.resp.header;\n            this.block.block_type = \"Block\"\n          }\n          console.log(\"thisblock::\",this.block)\n        }\n        \n        \n        \n        // let height = 0;\n        // if (v.height) {\n        //   height = this.parseFormatNumber(v.height);\n        // }\n        // this.height = Number(height);\n      }\n    }\n  },\n  components: {\n    // TicketChain,\n    // BlockList,\n    BlockDetail\n  },\n  computed: {\n    ...mapState([\"defaultHeight\"]),\n    currentHeight() {\n      return Number(this.height || this.defaultHeight);\n    },\n    currentBlockList() {\n      if (this.height) {\n        return this.blocks.filter(item => {\n          return item.height == this.formatNumber(this.height);\n        });\n      } else {\n        return this.blocks;\n      }\n    },\n    currentBlock() {\n      console.log(\"sd--\",this.block)\n      return this.block;\n    },\n    mbBlockList() {\n      const res = {};\n      this.blocks.forEach(item => {\n        if (!res[item.height]) {\n          res[item.height] = [item];\n        } else {\n          res[item.height].push(item);\n        }\n      });\n      return res;\n    },\n    mbColumns() {\n      const labels = [...this.$t(\"component.blockList.label\")];\n      labels.shift();\n      return this.columns.map((item, index) => {\n        return {\n          ...item,\n          title: labels[index]\n        };\n      });\n    }\n  },\n  methods: {\n    getBlocks(v) {\n      console.log(\"v:\",v)\n      this.blocks = v;\n    },\n    handleHashChange(v) {\n      this.goTo(\"tipset\", {\n        query: {\n          hash: v\n        }\n      });\n    },\n    handleHeightChange(v) {\n      this.goTo(\"tipset\", {\n        query: {\n          height: v\n        }\n      });\n    },\n    handleValueChange() {\n      this.height = this.value;\n      this.goTo(\"tipset\", {\n        query: {\n          height: this.value\n        }\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.tipset {\n  .chart-con {\n    width: 100%;\n    background: var(--main-bg-color);\n    .chart {\n      width: 100%;\n      height: 500px;\n    }\n  }\n  @media (max-width: 768px) {\n    .block-item-con {\n      .height {\n        text-align: center;\n        background: var(--link-color);\n        color: white;\n        line-height: 20px;\n        margin-bottom: 10px;\n      }\n      //display: flex;\n      // .height{\n      //   background: var(--link-color);\n      //   height: 20px;\n      //   line-height: 20px;\n      //   color: white;\n      //   padding-left: 10px;\n      //   margin-right: 10px;\n      //   position: relative;\n      //   width: 70px;\n      //   &::after{\n      //     content: '';\n      //     display: inline-block;\n      //     width: 14px;\n      //     height: 14px;\n      //     background: var(--link-color);\n      //     transform: rotate(45deg);\n      //     position: absolute;\n      //     right: -7px;\n      //     top: 3px\n      //   }\n      // }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tipset.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tipset.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tipset.vue?vue&type=template&id=0e5cd3b5&scoped=true&\"\nimport script from \"./Tipset.vue?vue&type=script&lang=js&\"\nexport * from \"./Tipset.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tipset.vue?vue&type=style&index=0&id=0e5cd3b5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e5cd3b5\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockDetail.vue?vue&type=style&index=0&id=3448f995&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BlockDetail.vue?vue&type=style&index=0&id=3448f995&lang=scss&scoped=true&\""],"sourceRoot":""}